<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="KinderLand">
  
  	<resultMap type="Kinderland" id="kinderreslutSet">
  		<result property="kinderNo" column="KINDER_NO"/>
  		<result property="kinderName" column="KINDER_NAME"/>
  		<result property="kinderPhone" column="KINDER_PHONE"/>
  		<result property="kinderAddress" column="KINDER_ADDRESS"/>	
  	
  	</resultMap>
  	
  	<resultMap type="KinGardenClassesvo" id="kinderclassseultSet">
  		<id property="classNo" column="CLASS_NO"/>
  		<result property="division" column="DIVISION"/>
  		<result property="kinderNo" column="KINDER_NO"/>
  		<result property="className" column="CLASS_NAME"/>
  	</resultMap>
 
  	<select id="selectckinder" resultMap="kinderreslutSet">
  	
  	SELECT *
  	FROM KINDERGARDEN
  	WHERE KINDER_ADDRESS LIKE '%' || #{ kinderAddress } || '%'
  		

  	</select>
  	
  	<select id="selectKinderclass" resultMap="kinderclassseultSet">
  	
  		SELECT *
  		FROM KINDER_CLASS
  		WHERE KINDER_NO = #{kinderNo}
  	
  	
  	</select>
  	
  	<insert id="insertChildren">
  		INSERT INTO CHILDREN_KIND VALUES( #{childrenNo}, #{kinderNo} , '미승인' )	
  	
  	</insert>
  	
  	<insert id="insertchildrenclass">
  	
  	INSERT INTO KINDER_CLASS VALUES( SEQ_CLASS_NO.NEXTVAL , #{kinderNo} ,  #{className} , SYSDATE , '1학기' ,'원생' , NULL , #{childrenNo} )
  	
  	</insert>
  	
  	<update id="updatechildrenclass">
  	
  	UPDATE CHILDREN_KIND SET STATUS = '승인'
  	WHERE CHILDREN_NO = #{childrenNo}
  	
  	</update>
  	
  	<insert id="insertTeacher">
  	
  		INSERT INTO TEACHER
  		VALUES (#{kinderNo} , #{teacherNo} , '미승인')
  	
  	</insert>
  	
  	<insert id="insertTeacgerClass">
  		
  		INSERT INTO KINDER_CLASS VALUES( SEQ_CLASS_NO.NEXTVAL , #{kinderNo} ,  #{className} , SYSDATE , '1학기' ,'선생님' , #{teacherNo} , NULL )
  	
  	</insert>
  	
  	<update id="updateteacherclass">
  		
  		UPDATE TEACHER SET STATUS = '승인'
  		WHERE TEACHER_NO = #{teacherNo}
  	
  	</update>
	

  </mapper>