<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Pay">
	<resultMap type="PayPA" id="payResultSet">
		<id property="PayNo" column="PAY_NO"/>
		<result property="seasonId" column="SEASON_ID"/>
		<result property="userNo" column="USER_NO"/>
		<result property="payMoney" column="PAY_MONEY"/>
		<result property="payOnNo" column="PAY_ON_NO"/>
		<result property="payDate" column="PAY_DATE"/>
		<result property="payType" column="PAY_TYPE"/>
	</resultMap>
	
	<resultMap type="KindergardenPA" id="kindergardenResultSet">
		<id property="kinderNo" column="KINDER_NO"/>
		<result property="kinderName" column="KINDER_NAME"/>
		<result property="kinderPhone" column="KINDER_PHONE"/>
		<result property="kinderAddress" column="KINDER_ADDRESS"/>
	</resultMap>
	
	
	<select id="selectGardenInfo" parameterType="_int" resultMap="kindergardenResultSet">
		SELECT *
		FROM KINDERGARDEN
		WHERE KINDER_NO = #{kinderNo}
	</select>
	
	<insert id="paymentSuccess" parameterType="PayPA">
		INSERT INTO PAY
		VALUES(SEQ_PAY_NO.NEXTVAL, #{seasonId}, #{userNo}, #{payMoney})
	</insert>
	
	<insert id="insertPayOn" parameterType="PayPA">
		INSERT INTO PAY
		VALUES(SEQ_PAY_ON_NO.NEXTVAL, SEQ_PAY_NO.CURRVAL, SYSDATE, '결제완료')
	</insert>
	
	<select id="selectGardenUsing" parameterType="KindergardenPA" resultMap="kindergardenResultSet">
		SELECT KINDER_NO, USING_DATE
		FROM KINDERGARDEN_USING
		WHERE KINDER_NO = #{user_no}
	</select>
</mapper>

	