<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="KinderLand">
  
  	<resultMap type="Kinderland" id="kinderreslutSet">
  		<result property="kinderNo" column="KINDER_NO"/>
  		<result property="kinderName" column="KINDER_NAME"/>
  		<result property="kinderPhone" column="KINDER_PHONE"/>
  		<result property="kinderAddress" column="KINDER_ADDRESS"/>	
  	
  	</resultMap>
  	
  	<resultMap type="KinGardenClassesvo" id="kinderclassseultSet">
  		<id property="classNo" column="CLASS_NO"/>
  		<result property="division" column="DIVISION"/>
  		<result property="kinderNo" column="KINDER_NO"/>
  		<result property="className" column="CLASS_NAME"/>
  	</resultMap>
  	
  	<resultMap type="Kinderclass" id="KinderclassResultSet">
  	
  		<id property="kinderNo" column="KINDER_NO"/>
  		<result property="className" column="CLASS_NAME"/>
  		<result property="classMax" column="CLASS_MAX"/>
  		<result property="openedDate" column="OPENED_DATE"/>
  		<result property="closeDate" column="CLOSE_DATE"/>
  	
  	</resultMap>
  	
 
  	<select id="selectckinder" resultMap="kinderreslutSet">
  	
  	SELECT *
  	FROM KINDERGARDEN
  	WHERE KINDER_ADDRESS LIKE '%' || #{ kinderAddress } || '%'
  		

  	</select>
  	
  	<select id="selectKinderclass" resultMap="kinderclassseultSet">
  	
  		SELECT *
  		FROM KINDER_CLASS
  		WHERE KINDER_NO = #{kinderNo}
  	
  	
  	</select>
  	
  	<insert id="insertChildren">
  		INSERT INTO CHILDREN_KIND VALUES( #{childrenNo}, #{kinderNo} , '미승인' )	
  	
  	</insert>
  	
  	<insert id="insertchildrenclass">
  	
  	INSERT INTO KINDER_CLASS VALUES( SEQ_CLASS_NO.NEXTVAL , #{kinderNo} ,  #{className} , SYSDATE , '1학기' ,'원생' , NULL , #{childrenNo} )
  	
  	</insert>
  	
  	<update id="updatechildrenclass">
  	
  	UPDATE CHILDREN_KIND SET STATUS = '승인'
  	WHERE CHILDREN_NO = #{childrenNo}
  	
  	</update>
  	
  	<insert id="insertTeacher">
  	
  		INSERT INTO TEACHER
  		VALUES (#{kinderNo} , #{teacherNo} , '미승인')
  	
  	</insert>
  	
  	<insert id="insertTeacgerClass">
  		
  		INSERT INTO KINDER_CLASS VALUES( SEQ_CLASS_NO.NEXTVAL , #{kinderNo} ,  #{className} , SYSDATE , '1학기' ,'선생님' , #{teacherNo} , NULL )
  	
  	</insert>
  	
  	<update id="updateteacherclass">
  		
  		UPDATE TEACHER SET STATUS = '승인'
  		WHERE TEACHER_NO = #{teacherNo}
  	
  	</update>
  	
  	<update id="menuupdate">
  		
  		UPDATE ON_OFF SET ANNOUNCEMENT = #{announcement} , MEAL = #{meal} , DOSAGE = #{dosage} , HOMECOMING = #{homecoming} , BOARD_NOTICE = #{boardNotice} , ALBUM = #{album} , SCHEDULE = #{schedule} , ATTENDANCE = #{attendance}, IN_OUT = #{inOut}
		WHERE KINDER_NO = #{kinderNo}
  	
  	</update>
  	
  	<update id="kinderUpdate">
  		
  		UPDATE KINDERGARDEN SET KINDER_NAME = #{kinderName} , KINDER_PHONE = #{phone} , KINDER_ADDRESS = #{address}
  		WHERE KINDER_NO = #{kinderNo}
  	
  	</update>
  	
  	<select id="kinderbanplus" resultMap="KinderclassResultSet">
  		
  		SELECT *
  		FROM KINDER_CLASSES
  		WHERE KINDER_NO = #{kinderNo}
  	
  	</select>
  	
  	<select id="kinderclassMax" resultType="_int">
  		
  		SELECT COUNT(*)
  		FROM KINDER_CLASS
  		WHERE KINDER_NO = #{kinderNo}
  		AND CLASS_NAME = #{className}
  	
  	</select>
	

  </mapper>